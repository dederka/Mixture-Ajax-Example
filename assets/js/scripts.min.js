window.mix=function(e,t){"use strict";var n=function(){return e.addEventListener?"ontouchstart"in e?"touchstart":"click":"click"},r=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")},s=function(e,t){e&&!r(e,t)&&(e.className+=" "+t)},a=function(e,t){var n=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(r(e,t)){for(;n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className=n.replace(/^\s+|\s+$/g,"")}},o=function(t,n,r){e.addEventListener?t.addEventListener(n,r,!1):t.attachEvent("on"+n,r)},i=function(e,t){for(var r=0;r<e.length;r++)o(e[r],n(),t)},c=function(e,t){if(e.lengthComputable){var n=e.loaded/e.total*100;t.style.opacity=n>=100?0:1,t.style.width=n+"%"}else t.style.opacity=1,t.style.width="50%"},l=function(n,r){if(e.addEventListener&&"pushState"in history){var s=location.href,a=!1;t.body.innerHTML='<div id="'+n+'"></div>'+t.body.innerHTML,e.addEventListener("popstate",function(){var e=!a&&location.href==s;if(a=!0,!e){var o="/"===location.pathname?"/index":location.pathname;d({method:"get",uri:o,uriPrefix:"/fragment",success:function(e){r&&(t.getElementById(r).innerHTML=e)},error:function(e,t){console.log(e,t)},progress:function(e){n&&mix.progressBar(e,t.getElementById(n))}})}},!1)}},d=function(t){var n=new XMLHttpRequest,r=t.method||"get",s=t.dataType||"html",a=t.success,o=t.error,i=t.progress,c=t.historyUri,l=t.uriPrefix||null;c&&("pushState"in history?history.pushState(null,null,c):e.location.href=t.uri),n.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var e=this.response||this.responseText||this.responseXML;s.match(/json/gi)&&(e=JSON.parse(e)),a&&a(e)}else o&&o(this.status,this.statusText)},n.onprogress=function(e){i&&i(e)},n.onerror=function(e){o&&o(e.status,e.statusText)},n.open(r,l+t.uri),t.headers&&Object.keys(t.headers).forEach(function(e){n.setRequestHeader(e,t.headers[e])}),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t.data?urlstringify(t.data):null)};return{navigate:d,click:i,progressBar:c,browserHistory:l,removeClass:a,addClass:s}}(window,document),function(e,t){"use strict";mix.browserHistory("js-progress","js-content");var n=t.querySelectorAll("header a");mix.click(n,function(e){e.preventDefault();for(var r=0;r<n.length;r++)mix.removeClass(n[r].parentNode,"selected");"LI"===e.target.parentNode.nodeName&&mix.addClass(e.target.parentNode,"selected"),mix.progressBar({lengthComputable:!0,loaded:10,total:100},t.getElementById("js-progress")),mix.navigate({method:"get",uri:"/"===e.target.pathname?"/index":e.target.pathname,uriPrefix:"/fragment",historyUri:e.target.pathname,success:function(e){t.getElementById("js-content").innerHTML=e,mix.progressBar({lengthComputable:!0,loaded:100,total:100},t.getElementById("js-progress"))},error:function(e,t){console.log(e,t)},progress:function(e){mix.progressBar(e,t.getElementById("js-progress"))}})})}(window,document);