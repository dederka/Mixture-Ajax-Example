window.mix=function(e){"use strict";var t=function(){return e.addEventListener?"ontouchstart"in e?"touchstart":"click":"click"},n=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")},r=function(e,t){e&&!n(e,t)&&(e.className+=" "+t)},a=function(e,t){var r=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(n(e,t)){for(;r.indexOf(" "+t+" ")>=0;)r=r.replace(" "+t+" "," ");e.className=r.replace(/^\s+|\s+$/g,"")}},s=function(t,n,r){e.addEventListener?t.addEventListener(n,r,!1):t.attachEvent("on"+n,r)},o=function(e,n){for(var r=0;r<e.length;r++)s(e[r],t(),n)},i=function(t){var n=new XMLHttpRequest,r=t.method||"get",a=t.dataType||"html",s=t.success,o=t.error,i=t.progress,l=t.historyUri,c=t.uriPrefix||null;l&&("pushState"in history?history.pushState(null,null,l):e.location.href=t.uri),n.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var e=this.response||this.responseText||this.responseXML;a.match(/json/gi)&&(e=JSON.parse(e)),s&&s(e)}else o&&o(this.status,this.statusText)},n.onprogress=function(e){i&&i(e)},n.onerror=function(e){o&&o(e.status,e.statusText)},n.open(r,c+t.uri),t.headers&&Object.keys(t.headers).forEach(function(e){n.setRequestHeader(e,t.headers[e])}),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t.data?urlstringify(t.data):null)};return{navigate:i,click:o,removeClass:a,addClass:r}}(window,document),function(e,t){"use strict";t.body.innerHTML='<div id="js-progress"></div>'+t.body.innerHTML;var n=function(e,t){if(e.lengthComputable){var n=e.loaded/e.total*100;n>100&&(n=100),t.style.opacity=n>=100?0:1,t.style.width=n+"%"}else t.style.opacity=1,t.style.width="50%"},r=function(e,t,r,a){r.innerHTML=e;var s=r.querySelectorAll("img");if(s){var o=s.length,i=Math.ceil(50/o);n({lengthComputable:!0,loaded:t,total:100},a);for(var l=0;l<s.length;l++){t+=i;var c=new Image;c.onload=function(){n({lengthComputable:!0,loaded:t,total:100},a)},c.src=s[l].getAttribute("src")}}else n({lengthComputable:!0,loaded:100,total:100},a)},a=function(e,t){for(var n=0;n<e.length;n++)mix.removeClass(e[n].parentNode,"selected"),e[n].getAttribute("href")===t&&mix.addClass(e[n].parentNode,"selected")};if(e.addEventListener&&"pushState"in history){var s=location.href,o=!1;e.addEventListener("popstate",function(){var e=!o&&location.href==s;if(o=!0,!e){var i="/"===location.pathname?"/index":location.pathname,l=t.querySelectorAll("header a");a(l,i);var c=50;mix.navigate({method:"get",uri:i,uriPrefix:"/fragment",success:function(e){r(e,c,t.getElementById("js-content"),t.getElementById("js-progress"))},error:function(e,t){console.log(e,t)},progress:function(e){n(e,t.getElementById("js-progress"))}})}},!1)}var i=t.querySelectorAll("header a");mix.click(i,function(e){e.preventDefault();var s="/"===e.target.pathname?"/index":e.target.pathname;a(i,s);var o=50;mix.navigate({method:"get",uri:s,uriPrefix:"/fragment",historyUri:e.target.pathname,success:function(e){r(e,o,t.getElementById("js-content"),t.getElementById("js-progress"))},error:function(e,t){console.log(e,t)},progress:function(e){n(e,t.getElementById("js-progress"))}})})}(window,document);