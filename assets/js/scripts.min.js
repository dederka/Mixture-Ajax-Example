window.mix=function(t,e){"use strict";var n,s,a,r={},o=function(t,e){t=t.split(" ");for(var n=0;n<t.length;n++)e(t[n],n)},i=function(){return t.addEventListener?"ontouchstart"in t?"touchstart":"click":"click"};return e.documentElement.classList?(n=function(t,e){return t.classList.contains(e)},s=function(t,e){t.classList.add(e)},a=function(t,e){t.classList.remove(e)}):(n=function(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},s=function(t,e){r.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},a=function(t,e){r.hasClass(t,e)&&(t.className=t.className.replace(new RegExp("(^|\\s)*"+e+"(\\s|$)*","g"),""))}),r.hasClass=function(t,e){return n(t,e)},r.addClass=function(t,e){o(e,function(e){s(t,e)})},r.removeClass=function(t,e){o(e,function(e){a(t,e)})},r.attachEvent=function(e,n,s){t.addEventListener?e.addEventListener(n,s,!1):e.attachEvent("on"+n,s)},r.click=function(t,e){for(var n=0;n<t.length;n++)this.attachEvent(t[n],i(),e)},r.navigate=function(e){var n=new XMLHttpRequest,s=e.method||"get",a=e.dataType||"html",r=e.success,o=e.error,i=e.progress,c=e.historyUri,l=e.uriPrefix||null;c&&("pushState"in history?history.pushState(null,null,c):t.location.href=e.uri),n.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var t=this.response||this.responseText||this.responseXML;a.match(/json/gi)&&(t=JSON.parse(t)),r&&r(t)}else o&&o(this.status,this.statusText)},n.onprogress=function(t){i&&i(t)},n.onerror=function(t){o&&o(t.status,t.statusText)},n.open(s,l+e.uri),e.headers&&Object.keys(e.headers).forEach(function(t){n.setRequestHeader(t,e.headers[t])}),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(e.data?urlstringify(e.data):null)},r}(window,document),function(t,e){"use strict";e.body.innerHTML='<div id="js-progress"></div>'+e.body.innerHTML;var n=function(t,e){if(t.lengthComputable){var n=t.loaded/t.total*100;n>100&&(n=100),e.style.opacity=n>=100?0:1,e.style.width=n+"%"}else e.style.opacity=1,e.style.width="50%"},s=function(t,e,s){e.innerHTML=t;var a=e.querySelectorAll("img");if(a){var r=50,o=a.length,i=Math.ceil(50/o);n({lengthComputable:!0,loaded:r,total:100},s);for(var c=0;c<a.length;c++){r+=i;var l=new Image;l.onload=function(){n({lengthComputable:!0,loaded:r,total:100},s)},l.src=a[c].getAttribute("src")}}else n({lengthComputable:!0,loaded:100,total:100},s)},a=function(t,e){for(var n=0;n<t.length;n++)mix.removeClass(t[n].parentNode,"selected"),t[n].getAttribute("href")===e&&mix.addClass(t[n].parentNode,"selected")};if(t.addEventListener&&"pushState"in history){var r=location.href,o=!1;t.addEventListener("popstate",function(){var t=!o&&location.href==r;if(o=!0,!t){var i="/"===location.pathname?"/index":location.pathname,c=e.querySelectorAll("header a");a(c,i),mix.navigate({method:"get",uri:i,uriPrefix:"/fragment",success:function(t){s(t,e.getElementById("js-content"),e.getElementById("js-progress"))},error:function(t,e){console.log(t,e)},progress:function(t){n(t,e.getElementById("js-progress"))}})}},!1)}var i=e.querySelectorAll("header a");mix.click(i,function(t){t.preventDefault();var r="/"===t.target.pathname?"/index":t.target.pathname;a(i,r),mix.navigate({method:"get",uri:r,uriPrefix:"/fragment",historyUri:t.target.pathname,success:function(t){s(t,e.getElementById("js-content"),e.getElementById("js-progress"))},error:function(t,e){console.log(t,e)},progress:function(t){n(t,e.getElementById("js-progress"))}})})}(window,document);