window.mix=function(e){"use strict";var t=function(){return e.addEventListener?"ontouchstart"in e?"touchstart":"click":"click"},n=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")},r=function(e,t){e&&!n(e,t)&&(e.className+=" "+t)},s=function(e,t){var r=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(n(e,t)){for(;r.indexOf(" "+t+" ")>=0;)r=r.replace(" "+t+" "," ");e.className=r.replace(/^\s+|\s+$/g,"")}},a=function(t,n,r){e.addEventListener?t.addEventListener(n,r,!1):t.attachEvent("on"+n,r)},o=function(e,n){for(var r=0;r<e.length;r++)a(e[r],t(),n)},i=function(t){var n=new XMLHttpRequest,r=t.method||"get",s=t.dataType||"html",a=t.success,o=t.error,i=t.progress,l=t.historyUri,c=t.uriPrefix||null;l&&("pushState"in history?history.pushState(null,null,l):e.location.href=t.uri),n.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var e=this.response||this.responseText||this.responseXML;s.match(/json/gi)&&(e=JSON.parse(e)),a&&a(e)}else o&&o(this.status,this.statusText)},n.onprogress=function(e){i&&i(e)},n.onerror=function(e){o&&o(e.status,e.statusText)},n.open(r,c+t.uri),t.headers&&Object.keys(t.headers).forEach(function(e){n.setRequestHeader(e,t.headers[e])}),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t.data?urlstringify(t.data):null)};return{navigate:i,click:o,removeClass:s,addClass:r}}(window,document),function(e,t){"use strict";t.body.innerHTML='<div id="js-progress"></div>'+t.body.innerHTML;var n=function(e,t){if(e.lengthComputable){var n=e.loaded/e.total*100;n>100&&(n=100),t.style.opacity=n>=100?0:1,t.style.width=n+"%"}else t.style.opacity=1,t.style.width="50%"};if(e.addEventListener&&"pushState"in history){var r=location.href,s=!1;e.addEventListener("popstate",function(){var e=!s&&location.href==r;if(s=!0,!e){var a="/"===location.pathname?"/index":location.pathname;navigate({method:"get",uri:a,uriPrefix:"/fragment",success:function(e){t.getElementById("js-content").innerHTML=e},error:function(e,t){console.log(e,t)},progress:function(e){n(e,t.getElementById("js-progress"))}})}},!1)}var a=t.querySelectorAll("header a");mix.click(a,function(e){e.preventDefault();for(var r=0;r<a.length;r++)mix.removeClass(a[r].parentNode,"selected");"LI"===e.target.parentNode.nodeName&&mix.addClass(e.target.parentNode,"selected");var s=50;mix.navigate({method:"get",uri:"/"===e.target.pathname?"/index":e.target.pathname,uriPrefix:"/fragment",historyUri:e.target.pathname,success:function(e){t.getElementById("js-content").innerHTML=e;var r=t.getElementById("js-content").querySelectorAll("img");if(r){var a=r.length,o=Math.ceil(50/a);n({lengthComputable:!0,loaded:s,total:100},t.getElementById("js-progress"));for(var i=0;i<r.length;i++){s+=o;var l=new Image;l.onload=function(){n({lengthComputable:!0,loaded:s,total:100},t.getElementById("js-progress"))},l.src=r[i].getAttribute("src")}}else n({lengthComputable:!0,loaded:100,total:100},t.getElementById("js-progress"))},error:function(e,t){console.log(e,t)},progress:function(e){n(e,t.getElementById("js-progress"))}})})}(window,document);